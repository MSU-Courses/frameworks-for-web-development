# HTTP-запрос и HTTP-ответ в Laravel

В предыдущей главе мы вкратце рассмотрели работу с объектом `Request`, который представляет собой HTTP-запрос. В этой главе подробнее остановимся на работе с HTTP-запросами и ответами в Laravel.

Более подробно этот объект будет рассматриваться при работе с формами.

## HTTP-запрос

Напомним, что объект `Request` представляет собой HTTP-запрос. Он содержит всю информацию о запросе, который был отправлен на сервер. В Laravel этот объект доступен в контроллерах и других местах, где используется контейнер зависимостей.

Проще говоря, объект `Request` предоставляет объектно-ориентированный интерфейс для работы с данными запроса. Рассмотрим пример его использования:

```php
use Illuminate\Http\Request;

// Возвращаем путь запроса
// Например, если обратиться к /request, метод вернет строку "/request"
Route::get('/request', function (Request $request) {
    return $request->path();
});
```

## Методы HTTP-запроса

Объект `Request` предоставляет множество методов для работы с данными запроса, которые можно использовать в разных частях приложения. Рассмотрим один из таких методов:

### `path()`

Метод `path()` возвращает путь текущего запроса без информации о хосте или параметрах запроса. **Например**, при обращении к URL `/request` этот метод вернет строку `/request`.


### `is()`

Метод `is()` проверяет, соответствует ли текущий путь запроса указанному шаблону. **Например**, если текущий путь запроса равен `/request`, то вызов метода `is('request')` вернет `true`.

```php
use Illuminate\Http\Request;

Route::get('/request', function (Request $request) {
    return $request->is('admin/*'); // Вернет true, если путь запроса начинается с "admin/"
});
```

### `url()`

Метод `url()` возвращает полный URL текущего запроса. **Например**, при обращении к URL `http://example.com/request` метод вернет строку `http://example.com/request`.

### Получение заголовков запроса

Для получения значения заголовков запроса можно использовать метод `header()`. **Например**, чтобы получить заголовок `User-Agent`, следует вызвать `$request->header('User-Agent')`.

Для проверки наличия заголовка используется метод `hasHeader()`. **Например**, чтобы проверить наличие заголовка `User-Agent`, вызовите `$request->hasHeader('User-Agent')`.

### `ip()`

Метод `ip()` возвращает IP-адрес клиента, который отправил текущий запрос. **Например**, при обращении к URL `http://example.com/request` этот метод вернет IP-адрес клиента.

### Куки

Для работы с куками запроса используются методы `cookie()` и `hasCookie()`. **Например**, чтобы получить значение куки `name`, следует вызвать `$request->cookie('name')`.

### Получение данных полей формы

Рассмотрим следующую HTML-форму:

```html
<form method="POST" action="/form">
    <input type="text" name="name" />
    <input type="number" name="age" />
    <select name="country">
        <option value="md">Moldova</option>
        <option value="us">USA</option>
    </select>
    <input type="submit" value="Отправить">
</form>
```

#### Получение всех данных формы

Чтобы получить все данные, отправленные через форму, можно воспользоваться методом `all()`. **Например**, вызов `$request->all()` вернет массив с данными формы:

```php
[
    'name' => 'John Doe',
    'age' => 30,
    'country' => 'md',
]
```

#### Получение данных конкретного поля

Для получения значения конкретного поля формы используется метод `input()`. **Например**, чтобы получить значение поля `name`, нужно вызвать `$request->input('name')`.

```php
$name = $request->input('name'); // Вернет 'John Doe', если поле name заполнено этим значением
```

Если поле не существует, метод вернет значение по умолчанию, которое можно указать вторым аргументом:

```php
$name = $request->input('name', 'Гость'); // Вернет 'Гость', если поле не заполнено
```

> [!NOTE]  
> Более подробно о методах объекта `Request` мы расскажем в разделе, посвященном работе с формами.